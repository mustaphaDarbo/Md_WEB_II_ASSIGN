<div class="dashboard-wrapper">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-brand">
      <div class="brand-logo">CM</div>
      <div class="brand-text">CONTENTFLOW CMS</div>
    </div>
    
    <nav class="nav-menu">
      <a routerLink="/articles" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h16M4 18h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </span>
        <span>Articles</span>
      </a>

      <a routerLink="/articles" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 4h16v16H4V4Z" stroke="currentColor" stroke-width="2"/><path d="M8 8h8M8 12h8M8 16h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </span>
        <span>Articles Library</span>
      </a>

      <a routerLink="/users" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 11c1.66 0 3-1.34 3-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3ZM8 11c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3Z" fill="currentColor"/><path d="M16 13c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4Zm-8 0c-.29 0-.62.02-.97.05C5.1 13.36 2 14.45 2 17v2h6v-2.2c0-1.32.7-2.42 1.8-3.25-.57-.23-1.18-.55-1.8-.55Z" fill="currentColor"/></svg>
        </span>
        <span>Users</span>
      </a>

      <a routerLink="/roles" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2 4 5v6c0 5 3.4 9.4 8 11 4.6-1.6 8-6 8-11V5l-8-3Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
        </span>
        <span>Roles &amp; Permissions</span>
      </a>

      <a routerLink="/access-matrix" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 3h18v18H3V3Z" stroke="currentColor" stroke-width="2"/><path d="M3 9h18M3 15h18M9 3v18" stroke="currentColor" stroke-width="2"/></svg>
        </span>
        <span>Access Matrix</span>
      </a>

      <button type="button" (click)="logout()" class="nav-item logout">
        <span class="nav-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 17l-1 0c-3 0-5-2-5-5s2-5 5-5h1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M14 7l5 5-5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M19 12H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </span>
        <span>Logout</span>
      </button>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <header class="topbar">
      <div class="topbar-left">
        <button type="button" class="icon-btn" aria-label="Menu">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 7h16M4 12h10M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>

      <div class="topbar-center">
        <h1 class="page-title">Access Matrix</h1>
      </div>

      <div class="topbar-right">
        <div class="user-chip">
          <span class="user-greeting">Hi,&nbsp;{{ user?.fullName || 'User' }}</span>
          <button type="button" class="avatar">
            <span>{{ userInitials }}</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Content Area -->
    <div class="content-area">
      <div class="page-header">
        <h1>Role-Based Access Control Matrix</h1>
        <div class="page-subtitle">View permissions for each user role in the system</div>
      </div>

      <!-- Access Matrix Table -->
      <div class="matrix-container">
        <table class="access-matrix-table">
          <thead>
            <tr>
              <th class="role-column">Role</th>
              <th *ngFor="let permission of permissionColumns" class="permission-column">
                {{ permissionLabels[permission] }}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let roleRow of accessMatrix" class="role-row">
              <td class="role-name">
                <span class="role-badge">{{ roleRow.role }}</span>
              </td>
              <td *ngFor="let permission of permissionColumns" class="permission-cell">
                <span class="permission-indicator" [class.allowed]="hasPermission(roleRow, permission)" [class.denied]="!hasPermission(roleRow, permission)">
                  <svg *ngIf="hasPermission(roleRow, permission)" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <svg *ngIf="!hasPermission(roleRow, permission)" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Legend -->
      <div class="legend">
        <h3>Legend</h3>
        <div class="legend-items">
          <div class="legend-item">
            <span class="permission-indicator allowed">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
            <span>Permission Granted</span>
          </div>
          <div class="legend-item">
            <span class="permission-indicator denied">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
            <span>Permission Denied</span>
          </div>
        </div>
      </div>

      <!-- Current User Info -->
      <div class="current-user-info" *ngIf="user">
        <h3>Your Current Role</h3>
        <div class="user-role-card">
          <div class="role-info">
            <span class="current-role">{{ user.role }}</span>
            <div class="user-permissions">
              <span class="permission-label">Your Permissions:</span>
              <div class="permissions-list">
                <span *ngFor="let permission of permissionColumns" 
                      class="user-permission" 
                      [class.has-permission]="hasUserPermission(permission)"
                      [class.no-permission]="!hasUserPermission(permission)">
                  {{ permissionLabels[permission] }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
