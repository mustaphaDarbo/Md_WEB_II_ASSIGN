<div class="app-layout">
  <!-- Top Navbar -->
  <header class="top-navbar">
    <div class="navbar-left">
      <button type="button" class="menu-toggle" (click)="toggleSidebar()" aria-label="Toggle sidebar">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 7h16M4 12h10M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <div class="app-title">CONTENTFLOW CMS</div>
    </div>

    <div class="navbar-right">
      <div class="user-info">
        <span class="welcome-text">Hi, {{ user?.fullName || 'User' }}</span>
        <div class="user-avatar">
          <span>{{ userInitials }}</span>
        </div>
        <button type="button" class="logout-btn" (click)="logout()" title="Logout">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 17l-1 0c-3 0-5-2-5-5s2-5 5-5h1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M14 7l5 5-5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M19 12H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Logout
        </button>
      </div>
    </div>
  </header>

  <div class="main-container">
    <!-- Sidebar -->
    <aside class="sidebar" [class.collapsed]="sidebarCollapsed">
      <nav class="sidebar-nav">
        <a routerLink="/dashboard" routerLinkActive="active" class="nav-item">
          <span class="nav-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 3h18v18H3V3Z" stroke="currentColor" stroke-width="2"/>
              <path d="M3 9h18M3 15h18M9 3v18" stroke="currentColor" stroke-width="2"/>
            </svg>
          </span>
          <span class="nav-text">Dashboard</span>
        </a>

        <a routerLink="/articles" routerLinkActive="active" class="nav-item">
          <span class="nav-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 6h16M4 12h16M4 18h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-text">Articles</span>
        </a>

        <a routerLink="/users" routerLinkActive="active" class="nav-item" *ngIf="hasPermission('manageUsers')">
          <span class="nav-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 11c1.66 0 3-1.34 3-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3ZM8 11c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3Z" fill="currentColor"/>
              <path d="M16 13c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4Zm-8 0c-.29 0-.62.02-.97.05C5.1 13.36 2 14.45 2 17v2h6v-2.2c0-1.32.7-2.42 1.8-3.25-.57-.23-1.18-.55-1.8-.55Z" fill="currentColor"/>
            </svg>
          </span>
          <span class="nav-text">Users</span>
        </a>

        <a routerLink="/roles" routerLinkActive="active" class="nav-item" *ngIf="hasPermission('manageRoles')">
          <span class="nav-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2 4 5v6c0 5 3.4 9.4 8 11 4.6-1.6 8-6 8-11V5l-8-3Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="nav-text">Roles & Permissions</span>
        </a>

        <a routerLink="/access-matrix" routerLinkActive="active" class="nav-item" *ngIf="hasPermission('manageRoles')">
          <span class="nav-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 3h18v18H3V3Z" stroke="currentColor" stroke-width="2"/>
              <path d="M3 9h18M3 15h18M9 3v18" stroke="currentColor" stroke-width="2"/>
            </svg>
          </span>
          <span class="nav-text">Access Matrix</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
